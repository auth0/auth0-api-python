name: SCA

on:
  push:
    branches: ["master", "main", "**"]

jobs:
  snyk-cli:
    uses: auth0/devsecops-tooling/.github/workflows/sca-scan.yml@main
    with:
      additional-arguments: "--exclude=README.md,.jfrog"
      python-version: "3.10"
      pre-scan-commands: |
        echo "Current directory: $(pwd)"
        echo "List of files in current directory:"
        ls -la
        echo "---"
        python3 -m venv venv --upgrade-deps
        ./venv/bin/pip3 install -r requirements.txt
    secrets: inherit